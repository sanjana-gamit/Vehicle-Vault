{% extends 'base.html' %}
{% block title %}New Arrivals | Vehicle Vault{% endblock %}
{% load static %}
{% block content %}

<section class="cars-page">
    <div class="section-header">
        <div class="badge bg-danger-subtle text-danger mb-3"
            style="border-radius: 20px; padding: 8px 20px; font-weight: 600; letter-spacing: 1px;">JUST ARRIVED</div>
        <h2>2025 Model Showcase</h2>
        <p>Discover the latest engineering marvels and newest additions to our flagship collection.</p>
    </div>

    <div class="car-grid">
        {% for car in cars %}
        <div class="car-card new-arrival-card">
            <div class="img-container">
                {% if car.car_image %}
                <img src="{{ car.car_image.url }}" alt="{{ car.brand }} {{ car.model }}">
                {% else %}
                <img src="{% static 'images/logo.png' %}" alt="Default Image">
                {% endif %}
                <div class="new-badge position-absolute top-0 start-0 m-3"
                    style="background: var(--accent); color: var(--bg-dark); border-radius: 8px; padding: 5px 12px; font-weight: 800; font-size: 0.7rem; text-transform: uppercase;">
                    New Arrival
                </div>
            </div>

            <div class="car-info">
                <div class="d-flex justify-content-between align-items-start mb-2">
                    <div>
                        <span class="text-muted small">{{ car.brand }}</span>
                        <h3 class="mb-0">{{ car.model }}</h3>
                    </div>
                    <span class="badge bg-dark border border-secondary">{{ car.launch_year }}</span>
                </div>

                <p class="price mb-4">â‚¹{{ car.price }}</p>

                <div class="d-grid gap-2">
                    <a href="{% url 'cars:car_detail' car.vin %}" class="card-btn">View Masterpiece</a>
                    <a href="{% url 'cars:add_to_compare' car.id %}" class="btn btn-sm btn-outline-secondary"
                        style="border-radius: 12px; font-weight: 600;">+ Compare</a>
                </div>

                {% if user.is_authenticated %}
                {% if user.role == 'Admin' or user == car.seller %}
                <div class="mt-3 pt-3 border-top border-secondary d-flex gap-2">
                    <a href="{% url 'cars:car_edit' car.vin %}" class="btn btn-sm btn-outline-info w-100"
                        style="border-radius: 10px;">Edit</a>
                    <a href="{% url 'cars:car_delete' car.vin %}" class="btn btn-sm btn-outline-danger w-100"
                        style="border-radius: 10px;" onclick="return confirm('Remove this listing?');">Delete</a>
                </div>
                {% endif %}
                {% endif %}
            </div>
        </div>
        {% empty %}
        <div class="text-center w-100 py-5">
            <div class="fs-1 mb-4">ðŸ†•</div>
            <p style="font-size: 1.2rem; color: var(--text-muted);">Fresh stock is on the way! Check back soon for the
                latest 2025 models.</p>
            <a href="{% url 'cars:all_cars' %}" class="login-btn mt-3">Browse All Cars</a>
        </div>
        {% endfor %}
    </div>
</section>

<style>
    .new-arrival-card {
        border: 1px solid rgba(255, 255, 255, 0.05);
        background: linear-gradient(145deg, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0) 100%);
        transition: var(--transition);
    }

    .new-arrival-card:hover {
        border-color: var(--accent);
        transform: translateY(-10px);
    }
</style>

{% endblock %}