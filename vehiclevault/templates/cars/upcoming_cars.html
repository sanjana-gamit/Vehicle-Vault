{% extends 'base.html' %}
{% block title %}Upcoming Cars | Vehicle Vault{% endblock %}
{% load static %}
{% block content %}

<section class="cars-page">
    <div class="section-header">
        <div class="badge bg-primary-subtle text-primary mb-3"
            style="border-radius: 20px; padding: 8px 20px; font-weight: 600; letter-spacing: 1px;">COMING SOON</div>
        <h2>The Future of Performance</h2>
        <p>Preview the most anticipated vehicle launches of 2026 and beyond.</p>
    </div>

    <div class="car-grid">
        {% for car in cars %}
        <div class="car-card upcoming-card">
            <div class="img-container">
                {% if car.car_image %}
                <img src="{{ car.car_image.url }}" alt="{{ car.brand }} {{ car.model }}"
                    style="filter: grayscale(0.4) brightness(0.8);">
                {% else %}
                <img src="{% static 'images/logo.png' %}" alt="Default Image">
                {% endif %}
                <div class="launch-badge position-absolute top-0 start-0 m-3"
                    style="background: var(--bg-dark); color: var(--accent); border: 1px solid var(--accent); border-radius: 12px; padding: 10px 18px; font-weight: 800; font-size: 0.8rem; backdrop-filter: blur(10px);">
                    EST. {{ car.launch_year }}
                </div>
            </div>

            <div class="car-info">
                <div class="text-accent small fw-bold mb-1" style="letter-spacing: 2px;">EXCLUSIVE PREVIEW</div>
                <h3>{{ car.brand }} {{ car.model }}</h3>
                <p class="price" style="color: var(--text-muted); font-size: 1.2rem;">Expected: â‚¹{{ car.price }}</p>

                <div class="progress mb-4"
                    style="height: 6px; background: rgba(255,255,255,0.05); border-radius: 10px;">
                    <div class="progress-bar"
                        style="width: 75%; background: linear-gradient(90deg, var(--accent), var(--primary));"></div>
                </div>

                <div class="d-grid gap-2">
                    <button class="card-btn"
                        onclick="alert('Coming soon! We will notify you when pre-orders open.');">Notify Me</button>
                    <a href="{% url 'cars:add_to_compare' car.id %}" class="btn btn-sm btn-outline-secondary"
                        style="border-radius: 12px; font-weight: 600;">+ Compare</a>
                </div>
                <a href="{% url 'cars:car_detail' car.vin %}"
                    class="btn btn-link text-accent mt-2 text-decoration-none small">Technical Preview â†’</a>

                {% if user.is_authenticated %}
                {% if user.role == 'Admin' or user == car.seller %}
                <div class="mt-4 pt-3 border-top border-secondary d-flex gap-2">
                    <a href="{% url 'cars:car_edit' car.vin %}" class="btn btn-sm btn-outline-info w-100"
                        style="border-radius: 10px;">Edit</a>
                    <a href="{% url 'cars:car_delete' car.vin %}" class="btn btn-sm btn-outline-danger w-100"
                        style="border-radius: 10px;" onclick="return confirm('Remove this preview?');">Delete</a>
                </div>
                {% endif %}
                {% endif %}
            </div>
        </div>
        {% empty %}
        <div class="text-center w-100 py-5">
            <div class="fs-1 mb-4">ðŸš€</div>
            <p style="font-size: 1.2rem; color: var(--text-muted);">Stay tuned! New previews are arriving shortly.</p>
            <a href="{% url 'cars:all_cars' %}" class="login-btn mt-3">Explore Current Inventory</a>
        </div>
        {% endfor %}
    </div>
</section>

<style>
    .upcoming-card {
        border: 1px dashed var(--glass-border);
        transition: var(--transition);
    }

    .upcoming-card:hover {
        border-style: solid;
        border-color: var(--accent);
    }
</style>

{% endblock %}